<template name="FarmCatDetail">
    <div class="row cat-detail-gallery">
        <div class="col-xs-12 text-right">
            <div class="container">
                <h1>{{farm.farm_name}} / {{breed.breed_name}} / {{cat.cat_name}}</h1>
            </div>
        </div>
        
        <div class="col-xs-12 main-pic">
            <div class="container">
                <img id="mainPic" src="{{catMainImage cat.cat_featured_image}}" alt="">
            </div>
        </div>
        <div class="col-xs-12 list-pic">
            <div class="container">
                <div class="list-pic-thumbnail col-xs-6 col-sm-4 col-md-3 col-lg-2">
                    <div class="img-cat-detail-gallery" data-image="{{catMainImage cat.cat_featured_image}}"
                    style="
                    background-image: url( '{{catThumbImage cat.cat_featured_image}}' );
                    background-repeat: no-repeat;
                    background-position: top center;
                    background-size: cover;"></div>
                </div>
                {{#each cat.cat_gallery}}
                    <div class="list-pic-thumbnail col-xs-6 col-sm-4 col-md-3 col-lg-2">
                        <div class="img-cat-detail-gallery" data-image="{{catMainImage image}}" style="
                        background-image: url( '{{catThumbImage image}}' );
                        background-repeat: no-repeat;
                        background-position: top center;
                        background-size: cover;"></div>
                    </div>
                {{/each}}
            </div>
        </div>
    </div>

    <div class="row">
        <div class="cat-detail-cat col-xs-12">
            <div class="container">
                <h2>ชื่อแมว: {{cat.cat_name}}</h2>
                <img src="/images/cat-detail-01.png" alt="" class="hidden-xs hidden-sm">
                <p>สายพันธุ์: {{breed.breed_thai_name}}</p>
                {{#if cat_dayofbirth}}
                    <p>เกิด : {{dayOfBirth cat_dayofbirth}}</p>
                {{/if}}
                {{#if cat.cat_sex}}
                    <p>เพศ: {{cat.cat_sex}}</p>
                {{/if}}
                {{#if color.color_name}}
                    <p>สี : {{color.color_name}}</p>
                {{/if}}
                {{#if cat.cat_character}}
                    <p>ลักษณะพิเศษ : {{cat.cat_character}}</p>
                {{/if}}
                {{#if cat.cat_medical_history}}
                    <p>ประวัติทางการแพทย์ : {{cat.cat_medical_history}}</p>
                {{/if}}
                {{#if cat.cat_pedigree_cert}}
                    <p>ใบกะรันตี : {{cat.cat_pedigree_cert}}</p>
                {{/if}}
                <div class="cat-price">
                    {{#if cat.cat_price_sale }}
                        ราคาพิเศษ: {{price cat.cat_price_sale}} บาท จาก <span>{{price cat.cat_price}} บาท</span>
                    {{else}}
                        ราคา: {{price cat.cat_price}} บาท
                    {{/if}}
                    
                </div>
            </div>
        </div>
    </div>

    <div class="row visible-xs visible-sm">
        <div class="cat-father">
            <div class="container">
                <div class="col-xs-12 cat-father-info">
                    <a href="{{catMainImage cat.cat_father}}"
                        data-toggle="lightbox"
                        data-type="image"
                        data-title="คุณพ่อ"
                        >
                        <div class="cat-father-thumbnail" style="
                        background-image: url( '{{catThumbImage cat.cat_father}}' );
                        background-repeat: no-repeat;
                        background-position: top center;
                        background-size: cover;"></div>
                        <div class="cat-father-desc">
                            คุณพ่อ
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div class="cat-mother">
            <div class="container">
                <div class="col-xs-12 cat-mother-info">
                    <a href="{{catMainImage cat.cat_mother}}"
                        data-toggle="lightbox"
                        data-type="image"
                        data-title="คุณแม่"
                        >
                        <div class="cat-mother-thumbnail" style="
                        background-image: url( '{{catThumbImage cat.cat_mother}}' );
                        background-repeat: no-repeat;
                        background-position: top center;
                        background-size: cover;"></div>
                        <div class="cat-mother-desc">
                            คุณแม่
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>


    <div class="row visible-md visible-lg">
        <div class="cat-father-mother">  
            <div class="container">
                <div class="col-md-6 cat-father-info">
                    <a href="{{catMainImage cat.cat_father}}"
                        data-toggle="lightbox"
                        data-type="image"
                        data-title="คุณพ่อ"
                        >
                        <div class="cat-father-thumbnail" style="
                        background-image: url( '{{catThumbImage cat.cat_father}}' );
                        background-repeat: no-repeat;
                        background-position: top center;
                        background-size: cover;"></div>
                        <div class="cat-father-desc">
                            คุณพ่อ
                        </div>
                    </a>
                </div>
                <div class="col-md-6 cat-mother-info">
                    <a href="{{catMainImage cat.cat_mother}}"
                        data-toggle="lightbox"
                        data-type="image"
                        data-title="คุณแม่"
                        >
                        <div class="cat-mother-thumbnail" style="
                        background-image: url( '{{catThumbImage cat.cat_mother}}' );
                        background-repeat: no-repeat;
                        background-position: top center;
                        background-size: cover;"></div>
                        <div class="cat-mother-desc">
                            คุณแม่
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>

    {{> RelatedCats}}
    
    <form class="comment-form form" name="comment">
        <div class="form-group {{errorClass 'author'}}">
            <div class="controls">
                <label for="commentAuthor">ชื่อของคุณ</label>
                {{#if currentUser }}
                    <input type="text" name="commentAuthor" id="commentAuthor" class="form-control" value="{{currentUser.username}}" readonly>
                {{else}}
                    <input type="text" name="commentAuthor" id="commentAuthor" class="form-control"> 
                {{/if}}
                <span class="help-block">{{errorMessage 'commentAuthor'}}</span>
            </div>
        </div>
        <div class="form-group {{errorClass 'body'}}">
            <div class="controls">
                <label for="body">Comment on this post</label>
                <textarea name="body" id="body" cols="30" rows="3" class="form-control"></textarea>
                <span class="help-block">{{errorMessage 'body'}}</span>
            </div>
        </div>
        <button class="btn btn-primary" type="submit">Add Comment</button>
    </form>
    <ul class="comments">
        {{#each comments}}
            <li>
                <h4>{{@index}}
                    <span class="author">{{comment_author}}</span>
                    <span class="date">{{created_at}}</span>
                </h4>
                <p>{{comment_message}}</p>
            </li>
        {{/each}}
    </ul>

    {{#if nextComment}}
        <a href="{{nextComment}}" class="load-more">ดูความคิดเห็นเพิ่มเติม</a>
        {{#unless ready}}
            {{> spinner}}
        {{/unless}}
    {{/if}}
</template>